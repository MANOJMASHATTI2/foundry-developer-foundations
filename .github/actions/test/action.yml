name: Detect Changed Paths
description: Identify directories with changes and output them for use in workflows.

inputs:
  base-ref:
    description: The base reference to compare changes against.
    required: false
    default: 'origin/master'
  token:
    description: GitHub token for authentication.
    required: true

outputs:
  affected-dirs:
    description: A newline-separated list of affected directories.

runs:
  using: node20
  steps:
    # 1) install the actionâ€™s runtime dependencies
    - name: Install dependencies
      shell: bash
      run: npm ci --omit=dev --no-audit --no-fund
      working-directory: ${{ github.action_path }}

    # 2) execute the action logic
    - name: Run Detect Changed Paths
      run: node index.js
      shell: bash
      working-directory: ${{ github.action_path }}
